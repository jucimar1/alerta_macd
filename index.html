<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>SOL Sniper Dashboard</title>
    <script src="https://unpkg.com"></script>
    <style>
        body { background: #0b0e11; color: #eaecef; margin: 0; font-family: sans-serif; height: 100vh; display: flex; flex-direction: column; }
        #chart { flex-grow: 1; width: 100%; }
        .stats { height: 100px; padding: 15px; background: #181a20; display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; border-top: 2px solid #2b3139; }
        .box { background: #2b3139; padding: 10px; border-radius: 4px; text-align: center; }
        .val { color: #f0b90b; font-weight: bold; display: block; font-size: 1.1em; }
    </style>
</head>
<body>
    <div id="chart"></div>
    <div class="stats">
        <div class="box">Preço SOL<span id="price" class="val">---</span></div>
        <div class="box">Dist. Suporte<span id="dSup" class="val">---</span></div>
        <div class="box">Suporte 24h<span id="sup" class="val" style="color: #0ecb81;">---</span></div>
        <div class="box">Resistência 24h<span id="res" class="val" style="color: #f6465d;">---</span></div>
    </div>

    <script>
        const chart = LightweightCharts.createChart(document.getElementById('chart'), {
            layout: { background: { color: '#0b0e11' }, textColor: '#848e9c' },
            grid: { vertLines: { color: '#1f2226' }, horzLines: { color: '#1f2226' } }
        });
        const candleSeries = chart.addCandlestickSeries({ upColor: '#0ecb81', downColor: '#f6465d' });

        async function updateDashboard() {
            try {
                // Endpoint correto para Klines (Velas) da [Binance API](https://binance-docs.github.io)
                const response = await fetch('https://api.binance.com');
                const rawData = await response.json();

                const formattedData = rawData.map(d => ({
                    time: d[0] / 1000,
                    open: parseFloat(d[1]), high: parseFloat(d[2]),
                    low: parseFloat(d[3]), close: parseFloat(d[4])
                }));

                candleSeries.setData(formattedData);

                const lastPrice = formattedData[formattedData.length - 1].close;
                const support = Math.min(...formattedData.slice(-24).map(d => d.low));
                const resistance = Math.max(...formattedData.slice(-24).map(d => d.high));
                const dist = ((lastPrice - support) / support * 100).toFixed(2);

                document.getElementById('price').innerText = `$${lastPrice.toFixed(2)}`;
                document.getElementById('sup').innerText = `$${support.toFixed(2)}`;
                document.getElementById('res').innerText = `$${resistance.toFixed(2)}`;
                document.getElementById('dSup').innerText = `${dist}%`;
                document.getElementById('dSup').style.color = dist < 1.5 ? '#0ecb81' : '#f0b90b';

            } catch (e) { console.error("Erro:", e); }
        }
        setInterval(updateDashboard, 10000);
        updateDashboard();
    </script>
</body>
</html>
