<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üéØ SOL Sniper PRO - Dashboard em Tempo Real</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    :root {
      --primary: #58a6ff;
      --success: #28a745;
      --danger: #dc3545;
      --warning: #ffc107;
      --dark-bg: #0d1117;
      --card-bg: #161b22;
      --border-color: #30363d;
      --text-primary: #c9d1d9;
      --text-secondary: #8b949e;
      --support-color: #28a745;
      --resistance-color: #dc3545;
      --volume-color: #58a6ff;
      --rsi-oversold: #28a745;
      --rsi-overbought: #dc3545;
      --rsi-neutral: #8b949e;
    }
    
    body {
      background: linear-gradient(135deg, var(--dark-bg) 0%, #111827 100%);
      color: var(--text-primary);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height: 1.6;
      padding: 20px;
      min-height: 100vh;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    
    header {
      text-align: center;
      padding: 30px 0;
      margin-bottom: 30px;
      position: relative;
    }
    
    h1 {
      font-size: 3.5rem;
      margin-bottom: 15px;
      background: linear-gradient(90deg, var(--primary), #8a6bff, var(--success));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      text-shadow: 0 0 20px rgba(88, 166, 255, 0.3);
      letter-spacing: -0.5px;
    }
    
    .subtitle {
      font-size: 1.4rem;
      color: var(--text-secondary);
      margin-top: 10px;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
    }
    
    .status-bar {
      background: rgba(22, 27, 34, 0.8);
      border-radius: 50px;
      padding: 12px 30px;
      display: inline-flex;
      align-items: center;
      margin: 25px auto;
      border: 1px solid var(--border-color);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    }
    
    .status-indicator {
      display: inline-block;
      width: 14px;
      height: 14px;
      background: var(--success);
      border-radius: 50%;
      margin-right: 10px;
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; box-shadow: 0 0 0 0 rgba(40, 167, 69, 0.4); }
      70% { opacity: 0.7; box-shadow: 0 0 0 8px rgba(40, 167, 69, 0); }
    }
    
    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 25px;
      margin-bottom: 30px;
    }
    
    .card {
      background: var(--card-bg);
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4),
                  0 0 30px rgba(88, 166, 255, 0.08);
      padding: 28px;
      border: 1px solid var(--border-color);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 5px;
      background: linear-gradient(90deg, var(--primary), var(--success));
      opacity: 0.7;
    }
    
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5),
                  0 0 40px rgba(88, 166, 255, 0.15);
    }
    
    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 22px;
      padding-bottom: 15px;
      border-bottom: 1px solid var(--border-color);
    }
    
    .card-title {
      font-size: 1.6rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .card-title i {
      font-size: 1.8rem;
    }
    
    .price-display {
      font-size: 4.2rem;
      font-weight: 800;
      text-align: center;
      margin: 25px 0;
      background: linear-gradient(90deg, var(--success), #34d399);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      text-shadow: 0 0 15px rgba(40, 167, 69, 0.3);
      position: relative;
    }
    
    .price-display::after {
      content: '$';
      position: absolute;
      left: -25px;
      top: 0;
      font-size: 0.6em;
      opacity: 0.7;
    }
    
    .price-display small {
      font-size: 1.2rem;
      font-weight: 400;
      color: var(--text-secondary);
      margin-left: 8px;
    }
    
    .metric-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 18px;
      margin-top: 15px;
    }
    
    .metric-item {
      padding: 15px;
      background: rgba(30, 34, 40, 0.7);
      border-radius: 14px;
      text-align: center;
      transition: all 0.3s ease;
    }
    
    .metric-item:hover {
      background: rgba(40, 45, 55, 0.9);
      transform: translateY(-2px);
    }
    
    .metric-label {
      font-size: 0.95rem;
      color: var(--text-secondary);
      margin-bottom: 8px;
      display: block;
    }
    
    .metric-value {
      font-size: 1.8rem;
      font-weight: 700;
      display: block;
    }
    
    .metric-badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 600;
      margin-top: 8px;
    }
    
    .badge-support {
      background: rgba(40, 167, 69, 0.15);
      color: var(--support-color);
      border: 1px solid var(--support-color);
    }
    
    .badge-resistance {
      background: rgba(220, 53, 69, 0.15);
      color: var(--resistance-color);
      border: 1px solid var(--resistance-color);
    }
    
    .badge-volume {
      background: rgba(88, 166, 255, 0.15);
      color: var(--volume-color);
      border: 1px solid var(--volume-color);
    }
    
    .badge-rsi {
      background: rgba(139, 92, 236, 0.15);
      color: #8b5cf6;
      border: 1px solid #8b5cf6;
    }
    
    .alert-container {
      grid-column: 1 / -1;
      background: rgba(30, 34, 40, 0.9);
      border-radius: 20px;
      padding: 25px;
      text-align: center;
      margin-top: 10px;
      min-height: 80px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.3rem;
      font-weight: 600;
      border: 2px solid transparent;
      transition: all 0.4s ease;
    }
    
    .alert-container.buy {
      background: rgba(40, 167, 69, 0.1);
      border-color: var(--support-color);
      color: var(--support-color);
      box-shadow: 0 0 25px rgba(40, 167, 69, 0.2);
    }
    
    .alert-container.sell {
      background: rgba(220, 53, 69, 0.1);
      border-color: var(--resistance-color);
      color: var(--resistance-color);
      box-shadow: 0 0 25px rgba(220, 53, 69, 0.2);
    }
    
    .alert-container.none {
      background: rgba(108, 117, 125, 0.1);
      border-color: var(--text-secondary);
      color: var(--text-secondary);
    }
    
    .chart-container {
      grid-column: 1 / -1;
      background: var(--card-bg);
      border-radius: 20px;
      padding: 25px;
      border: 1px solid var(--border-color);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
      margin-top: 10px;
    }
    
    .chart-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 1px solid var(--border-color);
    }
    
    .chart-title {
      font-size: 1.7rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .chart-placeholder {
      background: rgba(30, 34, 40, 0.7);
      border-radius: 16px;
      height: 300px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-secondary);
      font-size: 1.3rem;
      position: relative;
      overflow: hidden;
    }
    
    .chart-placeholder::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, 
        rgba(88, 166, 255, 0.05) 0%, 
        rgba(40, 167, 69, 0.05) 50%, 
        rgba(88, 166, 255, 0.05) 100%);
      animation: shimmer 2s infinite;
    }
    
    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }
    
    .chart-placeholder i {
      font-size: 4rem;
      opacity: 0.3;
      margin-right: 15px;
    }
    
    .chart-placeholder span {
      font-size: 1.5rem;
      opacity: 0.7;
    }
    
    .footer {
      text-align: center;
      padding: 30px;
      margin-top: 20px;
      border-top: 1px solid var(--border-color);
      color: var(--text-secondary);
      font-size: 0.95rem;
    }
    
    .update-time {
      display: inline-block;
      background: rgba(88, 166, 255, 0.1);
      color: var(--primary);
      padding: 5px 15px;
      border-radius: 20px;
      font-weight: 600;
      margin-top: 8px;
      font-size: 1.1rem;
    }
    
    .config-panel {
      background: var(--card-bg);
      border-radius: 20px;
      padding: 25px;
      margin: 25px 0;
      border: 1px solid var(--border-color);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
    }
    
    .config-title {
      font-size: 1.6rem;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .config-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-top: 15px;
    }
    
    .config-item {
      margin-bottom: 15px;
    }
    
    .config-label {
      display: block;
      margin-bottom: 8px;
      color: var(--text-secondary);
      font-size: 0.95rem;
    }
    
    .config-value {
      font-weight: 700;
      color: var(--primary);
      font-size: 1.3rem;
    }
    
    .loading {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 200px;
      font-size: 1.5rem;
      color: var(--text-secondary);
    }
    
    .loading-spinner {
      border: 4px solid rgba(88, 166, 255, 0.2);
      border-top: 4px solid var(--primary);
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin-right: 15px;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .error-message {
      background: rgba(220, 53, 69, 0.1);
      border-left: 4px solid var(--resistance-color);
      padding: 15px;
      border-radius: 0 8px 8px 0;
      margin: 20px 0;
      color: var(--text-primary);
    }
    
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background: var(--card-bg);
      border: 1px solid var(--border-color);
      border-radius: 16px;
      padding: 15px 25px;
      box-shadow: 0 10px 35px rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      gap: 12px;
      z-index: 1000;
      transform: translateX(400px);
      transition: transform 0.3s ease;
      animation: slideIn 0.3s forwards, slideOut 0.3s 2.7s forwards;
    }
    
    @keyframes slideIn {
      to { transform: translateX(0); }
    }
    
    @keyframes slideOut {
      to { transform: translateX(400px); }
    }
    
    .notification i {
      font-size: 1.8rem;
    }
    
    .notification.buy {
      border-left: 4px solid var(--support-color);
    }
    
    .notification.buy i {
      color: var(--support-color);
    }
    
    .notification.sell {
      border-left: 4px solid var(--resistance-color);
    }
    
    .notification.sell i {
      color: var(--resistance-color);
    }
    
    @media (max-width: 768px) {
      h1 {
        font-size: 2.7rem;
      }
      
      .subtitle {
        font-size: 1.15rem;
      }
      
      .price-display {
        font-size: 3.2rem;
      }
      
      .dashboard-grid {
        grid-template-columns: 1fr;
      }
      
      .metric-grid {
        grid-template-columns: 1fr 1fr;
      }
      
      .card {
        padding: 22px;
      }
      
      .notification {
        top: 70px;
        right: 15px;
        width: calc(100% - 30px);
        text-align: center;
      }
    }
    
    @media (max-width: 480px) {
      body {
        padding: 12px;
      }
      
      h1 {
        font-size: 2.3rem;
      }
      
      .subtitle {
        font-size: 1rem;
      }
      
      .price-display {
        font-size: 2.7rem;
      }
      
      .metric-grid {
        grid-template-columns: 1fr;
      }
      
      .metric-value {
        font-size: 1.6rem;
      }
      
      .card {
        padding: 18px;
      }
      
      .config-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1><i class="fas fa-crosshairs"></i> SOL Sniper PRO</h1>
      <div class="subtitle">Sistema de an√°lise t√©cnica avan√ßada para SOL/USDT com alertas em tempo real</div>
      
      <div class="status-bar">
        <span class="status-indicator"></span>
        <span><strong>Conectado √† Binance API</strong> ‚Ä¢ Atualizando a cada 60 segundos</span>
      </div>
    </header>
    
    <div class="config-panel">
      <div class="config-title">
        <i class="fas fa-cog"></i> Configura√ß√£o do Sistema
      </div>
      <div class="config-grid">
        <div class="config-item">
          <span class="config-label">Par Monitorado</span>
          <div class="config-value">SOL/USDT</div>
        </div>
        <div class="config-item">
          <span class="config-label">Timeframe</span>
          <div class="config-value">1h</div>
        </div>
        <div class="config-item">
          <span class="config-label">Per√≠odo RSI</span>
          <div class="config-value">14 velas</div>
        </div>
        <div class="config-item">
          <span class="config-label">Toler√¢ncia S/R</span>
          <div class="config-value">1.2%</div>
        </div>
        <div class="config-item">
          <span class="config-label">Threshold Volume</span>
          <div class="config-value">1.5x m√©dia</div>
        </div>
        <div class="config-item">
          <span class="config-label">√öltima Atualiza√ß√£o</span>
          <div class="config-value" id="last-update">Carregando...</div>
        </div>
      </div>
    </div>
    
    <div class="dashboard-grid">
      <div class="card">
        <div class="card-header">
          <div class="card-title">
            <i class="fas fa-coins"></i> Pre√ßo Atual
          </div>
          <div>
            <span class="metric-badge badge-rsi">SOL/USDT</span>
          </div>
        </div>
        <div class="price-display" id="current-price">
          <div class="loading">
            <div class="loading-spinner"></div>
            Carregando pre√ßo...
          </div>
        </div>
        <div class="alert-container none" id="alert-box">
          Aguardando an√°lise de mercado...
        </div>
      </div>
      
      <div class="card">
        <div class="card-header">
          <div class="card-title">
            <i class="fas fa-chart-line"></i> Indicadores T√©cnicos
          </div>
        </div>
        <div class="metric-grid">
          <div class="metric-item">
            <span class="metric-label">RSI (14)</span>
            <span class="metric-value" id="rsi-value">--</span>
            <span class="metric-badge badge-rsi" id="rsi-status">Carregando...</span>
          </div>
          <div class="metric-item">
            <span class="metric-label">Volume</span>
            <span class="metric-value" id="volume-ratio">--</span>
            <span class="metric-badge badge-volume" id="volume-status">Carregando...</span>
          </div>
          <div class="metric-item">
            <span class="metric-label">24h Alta</span>
            <span class="metric-value" id="high-24h">--</span>
            <span class="metric-badge badge-resistance">Resist√™ncia</span>
          </div>
          <div class="metric-item">
            <span class="metric-label">24h Baixa</span>
            <span class="metric-value" id="low-24h">--</span>
            <span class="metric-badge badge-support">Suporte</span>
          </div>
        </div>
      </div>
      
      <div class="card">
        <div class="card-header">
          <div class="card-title">
            <i class="fas fa-bullseye"></i> An√°lise de Revers√£o
          </div>
        </div>
        <div class="metric-grid">
          <div class="metric-item">
            <span class="metric-label">Dist. Suporte</span>
            <span class="metric-value" id="dist-support">--</span>
            <span class="metric-badge badge-support" id="support-status">Carregando...</span>
          </div>
          <div class="metric-item">
            <span class="metric-label">Dist. Resist√™ncia</span>
            <span class="metric-value" id="dist-resistance">--</span>
            <span class="metric-badge badge-resistance" id="resistance-status">Carregando...</span>
          </div>
          <div class="metric-item">
            <span class="metric-label">Sinal Atual</span>
            <span class="metric-value" id="current-signal">--</span>
            <span class="metric-badge" id="signal-badge">Aguardando</span>
          </div>
          <div class="metric-item">
            <span class="metric-label">For√ßa Sinal</span>
            <span class="metric-value" id="signal-strength">--</span>
            <span class="metric-badge" id="strength-badge">--</span>
          </div>
        </div>
      </div>
      
      <div class="chart-container">
        <div class="chart-header">
          <div class="chart-title">
            <i class="fas fa-chart-candlestick"></i> Gr√°fico de Velas (1h)
          </div>
          <div>
            <span class="metric-badge badge-rsi">Dados Binance API</span>
          </div>
        </div>
        <div class="chart-placeholder">
          <i class="fas fa-chart-line"></i>
          <span>Gr√°fico interativo em desenvolvimento<br><small>(Visualiza√ß√£o futura com Chart.js)</small></span>
        </div>
      </div>
    </div>
    
    <div class="footer">
      <p><i class="fas fa-robot"></i> SOL Sniper PRO v2.0 ‚Ä¢ Sistema automatizado de an√°lise t√©cnica</p>
      <p>Fonte de dados: Binance API ‚Ä¢ Atualiza√ß√£o autom√°tica a cada 60 segundos</p>
      <div class="update-time" id="next-update">Pr√≥xima atualiza√ß√£o em: 60s</div>
      <p style="margin-top: 12px; font-size: 0.9rem; opacity: 0.7;">
        <i class="fas fa-exclamation-triangle"></i> Este sistema √© para fins educacionais. Opere com responsabilidade e sempre use stop loss.
      </p>
    </div>
  </div>
  
  <div class="notification buy" id="notification" style="display: none;">
    <i class="fas fa-arrow-up"></i>
    <div>
      <div style="font-weight: 700; font-size: 1.1rem;">SINAL DE COMPRA</div>
      <div id="notification-message">SOL/USDT pr√≥ximo do suporte com RSI sobrevendido</div>
    </div>
  </div>
  
  <script>
    // Configura√ß√µes do sistema
    const CONFIG = {
      SYMBOL: 'SOLUSDT',
      INTERVAL: '1h',
      RSI_PERIOD: 14,
      TOLERANCE: 1.2, // 1.2%
      VOLUME_THRESHOLD: 1.5, // 1.5x m√©dia
      UPDATE_INTERVAL: 60000, // 60 segundos
      CANDLES_LIMIT: 100
    };
    
    // Estado da aplica√ß√£o
    let lastUpdate = null;
    let nextUpdateTimer = null;
    let countdownInterval = null;
    
    // Fun√ß√£o para buscar dados da Binance
    async function fetchCandles() {
      try {
        const url = `https://api.binance.com/api/v3/klines?symbol=${CONFIG.SYMBOL}&interval=${CONFIG.INTERVAL}&limit=${CONFIG.CANDLES_LIMIT}`;
        const response = await fetch(url);
        
        if (!response.ok) {
          throw new Error(`Erro na API Binance: ${response.status}`);
        }
        
        const data = await response.json();
        return data.map(candle => ({
          timestamp: candle[0],
          open: parseFloat(candle[1]),
          high: parseFloat(candle[2]),
          low: parseFloat(candle[3]),
          close: parseFloat(candle[4]),
          volume: parseFloat(candle[5])
        }));
      } catch (error) {
        console.error('Erro ao buscar candles:', error);
        showError(`Falha ao buscar dados da Binance: ${error.message}`);
        return null;
      }
    }
    
    // Calcular RSI
    function calculateRSI(candles, period = 14) {
      if (candles.length < period + 1) return 50;
      
      let gains = 0;
      let losses = 0;
      
      for (let i = candles.length - period; i < candles.length; i++) {
        const diff = candles[i].close - candles[i - 1].close;
        if (diff >= 0) gains += diff;
        else losses -= diff;
      }
      
      const avgGain = gains / period;
      const avgLoss = losses / period;
      
      if (avgLoss === 0) return 100;
      
      const rs = avgGain / avgLoss;
      return 100 - (100 / (1 + rs));
    }
    
    // Calcular suporte e resist√™ncia
    function calculateSupportResistance(candles, period = 24) {
      if (candles.length < period) {
        return { support: 0, resistance: 0, distanceToSupport: 0, distanceToResistance: 0 };
      }
      
      const recentCandles = candles.slice(-period);
      const support = Math.min(...recentCandles.map(c => c.low));
      const resistance = Math.max(...recentCandles.map(c => c.high));
      const currentPrice = candles[candles.length - 1].close;
      
      const distanceToSupport = ((currentPrice - support) / support) * 100;
      const distanceToResistance = ((resistance - currentPrice) / resistance) * 100;
      
      return {
        support,
        resistance,
        distanceToSupport,
        distanceToResistance,
        currentPrice
      };
    }
    
    // Analisar volume
    function analyzeVolume(candles, period = 24) {
      if (candles.length < period) {
        return { currentVolume: 0, avgVolume: 0, ratio: 1, status: 'unknown' };
      }
      
      const recentCandles = candles.slice(-period);
      const currentVolume = recentCandles[recentCandles.length - 1].volume;
      const totalVolume = recentCandles.reduce((sum, c) => sum + c.volume, 0);
      const avgVolume = totalVolume / period;
      const ratio = currentVolume / avgVolume;
      
      let status;
      if (ratio >= 2.0) status = 'Muito Alto';
      else if (ratio >= 1.5) status = 'Alto';
      else if (ratio >= 0.8) status = 'Normal';
      else status = 'Baixo';
      
      return { currentVolume, avgVolume, ratio, status };
    }
    
    // Verificar sinais
    function checkSignals(price, rsi, sr, volume) {
      const rsiOversold = rsi < 30;
      const rsiOverbought = rsi > 70;
      const nearSupport = sr.distanceToSupport <= CONFIG.TOLERANCE;
      const nearResistance = sr.distanceToResistance <= CONFIG.TOLERANCE;
      const highVolume = volume.ratio >= CONFIG.VOLUME_THRESHOLD;
      
      let signal = 'NEUTRO';
      let signalType = 'none';
      let strength = 'BAIXA';
      let strengthLevel = 1;
      let message = '';
      
      // Sinal de compra
      if ((nearSupport || rsiOversold) && !rsiOverbought) {
        signal = 'COMPRA';
        signalType = 'buy';
        strengthLevel = (nearSupport ? 1 : 0) + (rsiOversold ? 1 : 0) + (highVolume ? 1 : 0);
        strength = strengthLevel >= 2 ? 'ALTA' : 'M√âDIA';
        message = `SOL/USDT pr√≥ximo do suporte com RSI ${rsiOversold ? 'sobrevendido' : 'neutro'}`;
        if (highVolume) message += ' e volume elevado';
      } 
      // Sinal de venda
      else if ((nearResistance || rsiOverbought) && !rsiOversold) {
        signal = 'VENDA';
        signalType = 'sell';
        strengthLevel = (nearResistance ? 1 : 0) + (rsiOverbought ? 1 : 0) + (highVolume ? 1 : 0);
        strength = strengthLevel >= 2 ? 'ALTA' : 'M√âDIA';
        message = `SOL/USDT pr√≥ximo da resist√™ncia com RSI ${rsiOverbought ? 'sobrecomprado' : 'neutro'}`;
        if (highVolume) message += ' e volume elevado';
      }
      
      return {
        signal,
        signalType,
        strength,
        strengthLevel,
        message,
        rsiOversold,
        rsiOverbought,
        nearSupport,
        nearResistance,
        highVolume
      };
    }
    
    // Formatar moeda
    function formatCurrency(value) {
      return value.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
    }
    
    // Formatar tempo
    function formatTime(date) {
      return new Date(date).toLocaleString('pt-BR', {
        timeZone: 'America/Sao_Paulo',
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit',
        day: '2-digit',
        month: '2-digit',
        year: 'numeric'
      });
    }
    
    // Mostrar erro
    function showError(message) {
      const alertBox = document.getElementById('alert-box');
      alertBox.className = 'alert-container sell';
      alertBox.innerHTML = `<i class="fas fa-exclamation-triangle"></i> ${message}`;
    }
    
    // Mostrar notifica√ß√£o
    function showNotification(message, type = 'buy') {
      const notification = document.getElementById('notification');
      notification.className = `notification ${type}`;
      document.getElementById('notification-message').textContent = message;
      notification.style.display = 'flex';
      
      // Esconder ap√≥s 3 segundos
      setTimeout(() => {
        notification.style.display = 'none';
      }, 3000);
    }
    
    // Atualizar dashboard
    async function updateDashboard() {
      try {
        // Mostrar loading
        document.getElementById('current-price').innerHTML = `
          <div class="loading">
            <div class="loading-spinner"></div>
            Atualizando dados...
          </div>
        `;
        
        // Buscar dados
        const candles = await fetchCandles();
        if (!candles || candles.length === 0) {
          throw new Error('Nenhum dado recebido da Binance');
        }
        
        // Processar dados
        const lastCandle = candles[candles.length - 1];
        const currentPrice = lastCandle.close;
        const rsi = calculateRSI(candles, CONFIG.RSI_PERIOD);
        const sr = calculateSupportResistance(candles, 24);
        const volume = analyzeVolume(candles, 24);
        const signals = checkSignals(currentPrice, rsi, sr, volume);
        
        // Atualizar elementos do DOM
        document.getElementById('current-price').textContent = formatCurrency(currentPrice);
        document.getElementById('rsi-value').textContent = rsi.toFixed(2);
        document.getElementById('volume-ratio').textContent = volume.ratio.toFixed(2) + 'x';
        document.getElementById('high-24h').textContent = '$' + formatCurrency(sr.resistance);
        document.getElementById('low-24h').textContent = '$' + formatCurrency(sr.support);
        document.getElementById('dist-support').textContent = sr.distanceToSupport.toFixed(2) + '%';
        document.getElementById('dist-resistance').textContent = sr.distanceToResistance.toFixed(2) + '%';
        document.getElementById('current-signal').textContent = signals.signal;
        document.getElementById('signal-strength').textContent = signals.strength;
        
        // Atualizar status RSI
        const rsiStatusEl = document.getElementById('rsi-status');
        if (rsi < 30) {
          rsiStatusEl.textContent = 'Sobrevendido';
          rsiStatusEl.className = 'metric-badge badge-rsi';
          rsiStatusEl.style.color = 'var(--rsi-oversold)';
        } else if (rsi > 70) {
          rsiStatusEl.textContent = 'Sobrecomprado';
          rsiStatusEl.className = 'metric-badge badge-rsi';
          rsiStatusEl.style.color = 'var(--rsi-overbought)';
        } else {
          rsiStatusEl.textContent = 'Neutro';
          rsiStatusEl.className = 'metric-badge badge-rsi';
          rsiStatusEl.style.color = 'var(--rsi-neutral)';
        }
        
        // Atualizar status Volume
        const volumeStatusEl = document.getElementById('volume-status');
        volumeStatusEl.textContent = volume.status;
        if (volume.ratio >= 1.5) {
          volumeStatusEl.className = 'metric-badge badge-volume';
        } else {
          volumeStatusEl.className = 'metric-badge badge-volume';
          volumeStatusEl.style.opacity = '0.7';
        }
        
        // Atualizar status Suporte
        const supportStatusEl = document.getElementById('support-status');
        supportStatusEl.textContent = sr.distanceToSupport <= CONFIG.TOLERANCE ? 'PR√ìXIMO' : 'Distante';
        supportStatusEl.className = sr.distanceToSupport <= CONFIG.TOLERANCE ? 
          'metric-badge badge-support' : 'metric-badge badge-support';
        
        // Atualizar status Resist√™ncia
        const resistanceStatusEl = document.getElementById('resistance-status');
        resistanceStatusEl.textContent = sr.distanceToResistance <= CONFIG.TOLERANCE ? 'PR√ìXIMO' : 'Distante';
        resistanceStatusEl.className = sr.distanceToResistance <= CONFIG.TOLERANCE ? 
          'metric-badge badge-resistance' : 'metric-badge badge-resistance';
        
        // Atualizar badge de sinal
        const signalBadgeEl = document.getElementById('signal-badge');
        const strengthBadgeEl = document.getElementById('strength-badge');
        
        if (signals.signal === 'COMPRA') {
          signalBadgeEl.textContent = 'LONG';
          signalBadgeEl.className = 'metric-badge badge-support';
          signalBadgeEl.style.backgroundColor = 'rgba(40, 167, 69, 0.2)';
          
          strengthBadgeEl.textContent = signals.strength;
          strengthBadgeEl.className = 'metric-badge';
          strengthBadgeEl.style.backgroundColor = signals.strength === 'ALTA' ? 
            'rgba(40, 167, 69, 0.3)' : 'rgba(255, 193, 7, 0.2)';
          strengthBadgeEl.style.color = signals.strength === 'ALTA' ? 'var(--success)' : 'var(--warning)';
          
          // Atualizar alerta
          const alertBox = document.getElementById('alert-box');
          alertBox.className = 'alert-container buy';
          alertBox.innerHTML = `<i class="fas fa-arrow-up"></i> ${signals.message}`;
          
          // Mostrar notifica√ß√£o se for novo sinal forte
          if (signals.strengthLevel >= 2 && signals.nearSupport) {
            showNotification(signals.message, 'buy');
          }
        } else if (signals.signal === 'VENDA') {
          signalBadgeEl.textContent = 'SHORT';
          signalBadgeEl.className = 'metric-badge badge-resistance';
          signalBadgeEl.style.backgroundColor = 'rgba(220, 53, 69, 0.2)';
          
          strengthBadgeEl.textContent = signals.strength;
          strengthBadgeEl.className = 'metric-badge';
          strengthBadgeEl.style.backgroundColor = signals.strength === 'ALTA' ? 
            'rgba(220, 53, 69, 0.3)' : 'rgba(255, 193, 7, 0.2)';
          strengthBadgeEl.style.color = signals.strength === 'ALTA' ? 'var(--danger)' : 'var(--warning)';
          
          // Atualizar alerta
          const alertBox = document.getElementById('alert-box');
          alertBox.className = 'alert-container sell';
          alertBox.innerHTML = `<i class="fas fa-arrow-down"></i> ${signals.message}`;
          
          // Mostrar notifica√ß√£o se for novo sinal forte
          if (signals.strengthLevel >= 2 && signals.nearResistance) {
            showNotification(signals.message, 'sell');
          }
        } else {
          signalBadgeEl.textContent = 'ESPERAR';
          signalBadgeEl.className = 'metric-badge';
          signalBadgeEl.style.backgroundColor = 'rgba(108, 117, 125, 0.2)';
          signalBadgeEl.style.color = 'var(--text-secondary)';
          
          strengthBadgeEl.textContent = '-';
          strengthBadgeEl.className = 'metric-badge';
          strengthBadgeEl.style.backgroundColor = 'rgba(108, 117, 125, 0.2)';
          
          // Atualizar alerta
          const alertBox = document.getElementById('alert-box');
          alertBox.className = 'alert-container none';
          alertBox.textContent = 'Nenhum sinal forte no momento. Aguardando oportunidade.';
        }
        
        // Atualizar hor√°rios
        lastUpdate = new Date();
        document.getElementById('last-update').textContent = formatTime(lastUpdate);
        
        // Resetar contador
        if (countdownInterval) clearInterval(countdownInterval);
        let secondsLeft = Math.floor(CONFIG.UPDATE_INTERVAL / 1000);
        document.getElementById('next-update').textContent = `Pr√≥xima atualiza√ß√£o em: ${secondsLeft}s`;
        
        countdownInterval = setInterval(() => {
          secondsLeft--;
          document.getElementById('next-update').textContent = `Pr√≥xima atualiza√ß√£o em: ${secondsLeft}s`;
          if (secondsLeft <= 0) secondsLeft = Math.floor(CONFIG.UPDATE_INTERVAL / 1000);
        }, 1000);
        
        console.log('Dashboard atualizado com sucesso:', formatTime(lastUpdate));
        
      } catch (error) {
        console.error('Erro ao atualizar dashboard:', error);
        showError(`Erro ao atualizar dados: ${error.message || 'Verifique sua conex√£o com a internet'}`);
        
        // Manter √∫ltimo pre√ßo se houver
        if (document.getElementById('current-price').textContent.includes('Carregando')) {
          document.getElementById('current-price').textContent = '$ --.--';
        }
      }
    }
    
    // Inicializar dashboard
    function initDashboard() {
      console.log('Iniciando SOL Sniper PRO Dashboard...');
      
      // Primeira atualiza√ß√£o imediata
      updateDashboard();
      
      // Agendar pr√≥ximas atualiza√ß√µes
      nextUpdateTimer = setInterval(updateDashboard, CONFIG.UPDATE_INTERVAL);
      
      // Adicionar evento de clique para atualiza√ß√£o manual
      document.getElementById('current-price').addEventListener('click', () => {
        console.log('Atualiza√ß√£o manual solicitada');
        updateDashboard();
        
        // Feedback visual
        const priceEl = document.getElementById('current-price');
        const originalText = priceEl.textContent;
        priceEl.textContent = 'üîÑ Atualizando...';
        setTimeout(() => {
          if (priceEl.textContent === 'üîÑ Atualizando...') {
            priceEl.textContent = originalText;
          }
        }, 2000);
      });
      
      // Mensagem de boas-vindas no console
      console.log('%cüéØ SOL Sniper PRO Iniciado!', 'color: #58a6ff; font-size: 20px; font-weight: bold;');
      console.log(`%cDados sendo atualizados a cada ${CONFIG.UPDATE_INTERVAL / 1000} segundos`, 'color: #8b949e; font-size: 14px;');
      console.log('%cFonte: Binance API (https://api.binance.com)', 'color: #28a745; font-size: 14px;');
    }
    
    // Iniciar quando a p√°gina carregar
    window.addEventListener('DOMContentLoaded', initDashboard);
    
    // Tratar visibilidade da p√°gina (pausar quando em background)
    document.addEventListener('visibilitychange', () => {
      if (document.hidden) {
        console.log('P√°gina em background - pausando atualiza√ß√µes');
        if (nextUpdateTimer) clearInterval(nextUpdateTimer);
        if (countdownInterval) clearInterval(countdownInterval);
      } else {
        console.log('P√°gina em foco - retomando atualiza√ß√µes');
        if (nextUpdateTimer) clearInterval(nextUpdateTimer);
        if (countdownInterval) clearInterval(countdownInterval);
        updateDashboard();
        nextUpdateTimer = setInterval(updateDashboard, CONFIG.UPDATE_INTERVAL);
      }
    });
  </script>
</body>
</html>

